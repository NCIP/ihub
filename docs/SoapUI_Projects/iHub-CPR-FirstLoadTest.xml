<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="iHub-CPR-LoadTestClients" soapui-version="4.5.1" abortOnError="false" runType="SEQUENTIAL" resourceRoot="" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="soapBinding" type="wsdl" bindingName="{http://caXchange.nci.nih.gov/caxchangerequest}soapBinding" soapVersion="1_1" anonymous="optional" definition="http://localhost:12090/services/CaXchangeRequestService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://localhost:12090/services/CaXchangeRequestService?wsdl"><con:part><con:url>http://localhost:12090/services/CaXchangeRequestService?wsdl</con:url><con:content><![CDATA[<!--Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.6 in JDK 6.-->
<!--Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.6 in JDK 6.-->
<definitions targetNamespace="http://caXchange.nci.nih.gov/caxchangerequest" name="CaXchangeRequestService" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://caXchange.nci.nih.gov/caxchangerequest" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <xsd:schema>
      <xsd:import namespace="http://caXchange.nci.nih.gov/messaging" schemaLocation="http://localhost:12090/services/CaXchangeRequestService?xsd=1"/>
    </xsd:schema>
  </types>
  <message name="ProcessRequest">
    <part name="parameters" element="ns1:caXchangeRequestMessage" xmlns:ns1="http://caXchange.nci.nih.gov/messaging"/>
  </message>
  <message name="ProcessRequestResponse">
    <part name="parameters" element="ns2:caXchangeResponseMessage" xmlns:ns2="http://caXchange.nci.nih.gov/messaging"/>
  </message>
  <portType name="CaXchangeRequestPortType">
    <operation name="ProcessRequest">
      <input message="tns:ProcessRequest"/>
      <output message="tns:ProcessRequestResponse"/>
    </operation>
  </portType>
  <binding name="soapBinding" type="tns:CaXchangeRequestPortType">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <operation name="ProcessRequest">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="CaXchangeRequestService">
    <port name="soap" binding="tns:soapBinding">
      <soap:address location="http://localhost:12090/services/CaXchangeRequestService"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://localhost:12090/services/CaXchangeRequestService?xsd=1</con:url><con:content><![CDATA[<!--Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.6 in JDK 6.-->
<xs:schema elementFormDefault="qualified" version="1.0" targetNamespace="http://caXchange.nci.nih.gov/messaging" xmlns:tns="http://caXchange.nci.nih.gov/messaging" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="caXchangeRequestMessage" type="tns:message"/>
  <xs:element name="caXchangeResponseMessage" type="tns:responseMessage"/>
  <xs:element name="caXchangeRoutingMetadata" type="tns:routingMetadata"/>
  <xs:complexType name="message">
    <xs:sequence>
      <xs:element name="metadata" type="tns:metadata"/>
      <xs:element name="request" type="tns:request"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="metadata">
    <xs:sequence>
      <xs:element name="transactionControl" type="tns:transactionControls"/>
      <xs:element name="serviceType" type="xs:string"/>
      <xs:element name="operationName" type="xs:string"/>
      <xs:element name="externalIdentifier" type="xs:string"/>
      <xs:element name="caXchangeIdentifier" type="xs:string" minOccurs="0"/>
      <xs:element name="credentials" type="tns:credentials" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="credentials">
    <xs:sequence>
      <xs:element name="userName" type="xs:string" minOccurs="0"/>
      <xs:element name="groupName" type="xs:string" minOccurs="0"/>
      <xs:element name="gridIdentifier" type="xs:string" minOccurs="0"/>
      <xs:element name="password" type="xs:string" minOccurs="0"/>
      <xs:element name="delegatedCredentialReference" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="request">
    <xs:sequence>
      <xs:element name="businessMessagePayload" type="tns:messagePayload"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="messagePayload">
    <xs:sequence>
      <xs:element name="xmlSchemaDefinition" type="xs:anyURI"/>
      <xs:any processContents="lax" namespace="##other"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="responseMessage">
    <xs:sequence>
      <xs:element name="responseMetadata" type="tns:responseMetadata"/>
      <xs:element name="response" type="tns:response"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="responseMetadata">
    <xs:sequence>
      <xs:element name="externalIdentifier" type="xs:string"/>
      <xs:element name="caXchangeIdentifier" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="response">
    <xs:sequence>
      <xs:element name="responseStatus" type="tns:statuses"/>
      <xs:element name="caXchangeError" type="tns:errorDetails" minOccurs="0"/>
      <xs:element name="targetResponse" type="tns:targetResponseMessage" nillable="true" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="errorDetails">
    <xs:sequence>
      <xs:element name="errorCode" type="xs:string"/>
      <xs:element name="errorDescription" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="targetResponseMessage">
    <xs:sequence>
      <xs:element name="targetServiceIdentifier" type="xs:string"/>
      <xs:element name="targetServiceOperation" type="xs:string"/>
      <xs:element name="targetMessageStatus" type="tns:messageStatuses"/>
      <xs:element name="targetError" type="tns:errorDetails" minOccurs="0"/>
      <xs:element name="targetBusinessMessage" type="tns:messagePayload" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="mtMetadata">
    <xs:sequence>
      <xs:element name="messageType" type="xs:string"/>
      <xs:element name="payloadUri" type="xs:anyURI" nillable="true"/>
      <xs:element name="reliableTransactions" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="routingMetadata">
    <xs:sequence>
      <xs:element name="messageTypeMetadata" type="tns:mtMetadata" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="transactionControls">
    <xs:restriction base="xs:string">
      <xs:enumeration value="PROCESS"/>
      <xs:enumeration value="COMMIT"/>
      <xs:enumeration value="ROLLBACK"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="statuses">
    <xs:restriction base="xs:string">
      <xs:enumeration value="SUCCESS"/>
      <xs:enumeration value="FAILURE"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="messageStatuses">
    <xs:restriction base="xs:string">
      <xs:enumeration value="RESPONSE"/>
      <xs:enumeration value="ERROR"/>
      <xs:enumeration value="FAULT"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://localhost:12090/services/CaXchangeRequestService</con:endpoint><con:endpoint>https://ncias-d726-v.nci.nih.gov:7443/transcend-caxchange/services/CaXchangeRequestService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="" name="ProcessRequest" bindingOperationName="ProcessRequest" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation></con:interface><con:testSuite name="Registration_Load_TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="true" maxResults="0" name="CPR" searchProperties="true" discardOkResults="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings><con:setting id="HttpSettings@socket_timeout">600000</con:setting></con:settings><con:testStep type="properties" name="RegistrationReqProps"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>date</con:name><con:value>012042012</con:value></con:property><con:property><con:name>index</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="updateIndexScript"><con:settings/><con:config><script>testRunner.testCase.testSteps["RegistrationReqProps"].setPropertyValue( "index", String.valueOf(context.ThreadIndex)+String.valueOf(context.RunCount))


</script></con:config></con:testStep><con:testStep type="request" name="01-CPRRequest"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>soapBinding</con:interface><con:operation>ProcessRequest</con:operation><con:request name="01-CPRRequest" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:12090/services/CaXchangeRequestService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mes="http://caXchange.nci.nih.gov/messaging">
   <soapenv:Header/>
   <soapenv:Body>
      <mes:caXchangeRequestMessage>
         <mes:metadata>
            <mes:transactionControl>?</mes:transactionControl>
            <mes:serviceType>iHub</mes:serviceType>
            <!--Optional:-->
            <mes:operationName>Create Participant Registration</mes:operationName>
            <mes:externalIdentifier>322${index}</mes:externalIdentifier>
            <!--Optional:-->
            <mes:caXchangeIdentifier/>
            <!--Optional:-->
            <mes:credentials>
               <!--You have a CHOICE of the next 3 items at this level-->
               <mes:userName>tolvenuser</mes:userName>
               <mes:password>changeme</mes:password>
            </mes:credentials>
         </mes:metadata>
         <mes:request>
            <mes:businessMessagePayload>
               <mes:xmlSchemaDefinition>urn:hl7-org:v3</mes:xmlSchemaDefinition>
               <ClinicalDocument xsi:schemaLocation="urn:hl7-org:v3 ../cdaXSD/infrastructure/cda/CDA.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:hl7-org:v3">
                  <realmCode code="US"/>
                  <typeId root="2.16.840.1.113883.1.3" extension="POCD_HD000040"/>
                  <!--US Realm Header, consolidated CDA header template-->
                  <templateId root="2.16.840.1.113883.10.20.22.1.1" assigningAuthorityName="HL7 CCDA"/>
                  <id root="1100" extension="patient-422${index}:clinicalNote-1833300"/>
                  <!--There is no existing LOINC code for Registration report.-->
                  <code nullFlavor="OTH">
                     <originalText>Registration report</originalText>
                  </code>
                  <title>Registration report</title>
                  <effectiveTime value="20110722085054-0700"/>
                  <confidentialityCode code="N"/>
                  <languageCode code="en-US"/>
                  <recordTarget>
                     <patientRole>
                        <!--study subject identifier-->
                        <id root="1200" extension="1200${index}" assigningAuthorityName="iSpy2 Study"/>
                        <!--patient MRN-->
                        <id root="1200" extension="1200${index}" assigningAuthorityName="ABC Cancer Institute"/>
                     
                        <addr nullFlavor="NI"/>
                        <telecom nullFlavor="NI"/>
                        <patient>
                           <name use="L">
                              <given>FirstName${index}</given>
                              <given/>
                              <family>LastName${index}</family>
                           </name>
                           <!--gender-->
                           <administrativeGenderCode code="F" codeSystem="2.16.840.1.113883.5.1" displayName="Female"/>
                           <!--birth date-->
                           <birthTime value="19670131"/>
                           <!--marital status-->
                           <maritalStatusCode code="M" codeSystem="2.16.840.1.113883.5.2" codeSystemName="HL7 MaritalStatus" displayName="Married">
                              <originalText>Now married</originalText>
                           </maritalStatusCode>
                           <!--race-->
                           <raceCode code="2106-3" displayName="White" codeSystem="2.16.840.1.113883.6.238" codeSystemName="Race &amp; Ethnicity - CDC"></raceCode>
                           <!--ethnicity-->
                           <ethnicGroupCode code="2186-5" displayName="Not Hispanic or Latino" codeSystem="2.16.840.1.113883.6.238" codeSystemName="Race &amp; Ethnicity - CDC"/>
                        </patient>
                     </patientRole>
                  </recordTarget>
                  <author>
                     <time nullFlavor="NI"/>
                     <assignedAuthor>
                        <id root="1100" extension="matthew.salesi@ucsfmedctr.org"/>
                        <addr nullFlavor="NI"/>
                        <telecom nullFlavor="NI"/>
                        <assignedPerson>
                           <name nullFlavor="NI"/>
                        </assignedPerson>
                     </assignedAuthor>
                  </author>
                  <custodian>
                     <assignedCustodian>
                        <representedCustodianOrganization>
                           <id root="2.16.840.1.113883.3.26.1.7" extension="TranscendTolven"/>
                           <name nullFlavor="NI"/>
                           <telecom nullFlavor="NI"/>
                           <addr nullFlavor="NI"/>
                        </representedCustodianOrganization>
                     </assignedCustodian>
                  </custodian>
                  <!--site id-->
                  <documentationOf>
                     <serviceEvent classCode="CLNTRL">
                        <id root="7100" extension="${#TestCase#siteExt}"/>
                        <code nullFlavor="OTH">
                           <originalText>site-specific component of clinical trial</originalText>
                        </code>
                     </serviceEvent>
                  </documentationOf>
                  <!--study id-->
                  <documentationOf>
                     <serviceEvent classCode="CLNTRL">                        
                        <id root="${#TestCase#studyRoot}" extension="${#TestCase#studyExt}"/>
                        <code nullFlavor="OTH">
                           <originalText>clinical trial</originalText>
                        </code>
                     </serviceEvent>
                  </documentationOf>
                  <component>
                     <structuredBody>
                        <component>
                           <section>
                              <!--no existing CDA template, use a generic section to convey activity status data-->
                              <title>Registration</title>
                              <text>
                                 <content>Activity status:</content>
                                 active
                              </text>
                              <entry typeCode="DRIV">
                                 <!--no particular existing activity status CDA template, use result observation template to record registration status-->
                                 <observation classCode="OBS" moodCode="EVN">
                                    <!--Result observation template-->
                                    <templateId root="2.16.840.1.113883.10.20.22.4.2" assigningAuthorityName="HL7 CCDA"/>
                                    <id nullFlavor="NI"/>
                                    <code code="263490005" codeSystem="2.16.840.1.113883.6.96" codeSystemName="SNOMED-CT" displayName="Activity status"/>
                                    <value xsi:type="CD" code="55561003" codeSystem="2.16.840.1.113883.6.96" displayName="active" codeSystemName="SNOMED-CT"/>
                                 </observation>
                              </entry>
                           </section>
                        </component>
                        <component>
                           <section>
                              <!--HL7 consolidated CDA social history section template-->
                              <templateId root="2.16.840.1.113883.10.20.22.2.17" assigningAuthorityName="HL7 CCDA"/>
                              <code code="29762-2" displayName="social history" codeSystem="2.16.840.1.113883.6.1"/>
                              <title/>
                              <text/>
                              <!--no existing CDA template, use result observation template to record additional race. If a patient only has a single race code, then the code should be put to CDA header recordTarget/.../patient/raceCode element-->
                              <entry typeCode="DRIV">
                                 <observation classCode="OBS" moodCode="EVN">
                                    <!--Result observation template-->
                                    <templateId root="2.16.840.1.113883.10.20.22.4.2" assigningAuthorityName="HL7 CCDA"/>
                                    <id root="0b1f04da-983c-4438-a093-31011a5f9758"/>
                                    <code code="103579009" codeSystem="2.16.840.1.113883.6.96" codeSystemName="SNOMED-CT" displayName="race"/>
                                    <value xsi:type="CD" code="1002-5" displayName="American Indian or Alaska Native" codeSystem="2.16.840.1.113883.6.238" codeSystemName="Race &amp; Ethnicity - CDC"/>
                                 </observation>
                              </entry>
                           </section>
                        </component>
                     </structuredBody>
                  </component>
               </ClinicalDocument>
            </mes:businessMessagePayload>
         </mes:request>
      </mes:caXchangeRequestMessage>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response"/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://caXchange.nci.nih.gov/caxchangerequest/CaXchangeRequestPortType/ProcessRequestRequest"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:loadTest name="01-CPR-LoadTest"><con:description>All messages will create participant successfully</con:description><con:settings><con:setting id="HttpSettings@close-connections">false</con:setting></con:settings><con:threadCount>1</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>200</con:testLimit><con:limitType>COUNT_PER_THREAD</con:limitType><con:loadStrategy><con:type>Simple</con:type><con:config><testDelay>0</testDelay><randomFactor>0.0</randomFactor></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:statisticsLogFolder>C:\vin\SUITE-iHub\tmp\soapui\logs</con:statisticsLogFolder><con:statisticsLogInterval>0</con:statisticsLogInterval><con:logStatisticsOnThreadChange>true</con:logStatisticsOnThreadChange><con:cancelOnReachedLimit>false</con:cancelOnReachedLimit><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:setupScript>def date = org.codehaus.groovy.runtime.DateGroovyMethods.format(new Date(), 'MMddyyyy')
// 'datepfx' is set at project level, this allows to run the load tests multiple times on the same day, by just changing this value
date = loadTestRunner.loadTest.testCase.testSuite.project.getPropertyValue("datepfx") + date
loadTestRunner.loadTest.testCase.testSteps["RegistrationReqProps"].setPropertyValue("date", date)
</con:setupScript><con:updateStatisticsPerTestStep>true</con:updateStatisticsPerTestStep></con:loadTest><con:properties><con:property><con:name>studyRoot</con:name><con:value>ISPY2</con:value></con:property><con:property><con:name>studyExt</con:name><con:value>ISPY2</con:value></con:property><con:property><con:name>siteExt</con:name><con:value>7100</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>datepfx</con:name><con:value>0</con:value></con:property></con:properties><con:wssContainer/><con:sensitiveInformation/></con:soapui-project>