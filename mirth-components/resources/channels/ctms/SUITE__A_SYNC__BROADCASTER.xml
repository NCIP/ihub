<com.webreach.mirth.model.Channel>
  <id>afe931ad-7ed6-4894-b755-aaf7d5c2a492</id>
  <name>SUITE__A_SYNC__BROADCASTER</name>
  <description></description>
  <enabled>true</enabled>
  <version>1.8.2</version>
  <lastModified>
    <time>1291814368031</time>
    <timezone>America/New_York</timezone>
  </lastModified>
  <revision>613</revision>
  <sourceConnector>
    <name>sourceConnector</name>
    <properties>
      <property name="DataType">Channel Reader</property>
    </properties>
    <transformer>
      <steps>
        <com.webreach.mirth.model.Step>
          <sequenceNumber>0</sequenceNumber>
          <name>Settings</name>
          <script>default xml namespace = &quot;http://caXchange.nci.nih.gov/messaging&quot;
//default xml namespace = &quot;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.domain&quot;;

channelMap.put(&quot;registration_prefix&quot;,&apos;registration&apos;);</script>
          <type>JavaScript</type>
          <data class="map">
            <entry>
              <string>Script</string>
              <string>default xml namespace = &quot;http://caXchange.nci.nih.gov/messaging&quot;
//default xml namespace = &quot;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.domain&quot;;

channelMap.put(&quot;registration_prefix&quot;,&apos;registration&apos;);</string>
            </entry>
          </data>
        </com.webreach.mirth.model.Step>
        <com.webreach.mirth.model.Step>
          <sequenceNumber>1</sequenceNumber>
          <name>ns1metadata_ns1caxchangeidentifier</name>
          <script>var mapping;try { mapping = msg[&apos;metadata&apos;][&apos;caXchangeIdentifier&apos;].toString(); }catch (e) { logger.error(e);  mapping = &apos;&apos;;}channelMap.put(&apos;ns1metadata_ns1caxchangeidentifier&apos;, validate( mapping , &apos;&apos;, new Array()));</script>
          <type>Mapper</type>
          <data class="map">
            <entry>
              <string>Mapping</string>
              <string>msg[&apos;metadata&apos;][&apos;caXchangeIdentifier&apos;].toString()</string>
            </entry>
            <entry>
              <string>Variable</string>
              <string>ns1metadata_ns1caxchangeidentifier</string>
            </entry>
            <entry>
              <string>RegularExpressions</string>
              <list/>
            </entry>
            <entry>
              <string>DefaultValue</string>
              <string></string>
            </entry>
            <entry>
              <string>isGlobal</string>
              <string>channel</string>
            </entry>
          </data>
        </com.webreach.mirth.model.Step>
        <com.webreach.mirth.model.Step>
          <sequenceNumber>2</sequenceNumber>
          <name>ns1request_ns1businessmessagepayload_registration</name>
          <script>var mapping;try { mapping = msg[&apos;request&apos;][&apos;businessMessagePayload&apos;][&apos;registration&apos;].toString(); }catch (e) { logger.error(e);  mapping = &apos;&apos;;}channelMap.put(&apos;ns1request_ns1businessmessagepayload_registration&apos;, validate( mapping , &apos;&apos;, new Array()));</script>
          <type>Mapper</type>
          <data class="map">
            <entry>
              <string>Mapping</string>
              <string>msg[&apos;request&apos;][&apos;businessMessagePayload&apos;][&apos;registration&apos;].toString()</string>
            </entry>
            <entry>
              <string>Variable</string>
              <string>ns1request_ns1businessmessagepayload_registration</string>
            </entry>
            <entry>
              <string>RegularExpressions</string>
              <list/>
            </entry>
            <entry>
              <string>DefaultValue</string>
              <string></string>
            </entry>
            <entry>
              <string>isGlobal</string>
              <string>channel</string>
            </entry>
          </data>
        </com.webreach.mirth.model.Step>
        <com.webreach.mirth.model.Step>
          <sequenceNumber>3</sequenceNumber>
          <name>ns1metadata_ns1servicetype</name>
          <script>var mapping;try { mapping = msg[&apos;metadata&apos;][&apos;serviceType&apos;].toString(); }catch (e) { logger.error(e);  mapping = &apos;&apos;;}channelMap.put(&apos;ns1metadata_ns1servicetype&apos;, validate( mapping , &apos;&apos;, new Array()));</script>
          <type>Mapper</type>
          <data class="map">
            <entry>
              <string>Mapping</string>
              <string>msg[&apos;metadata&apos;][&apos;serviceType&apos;].toString()</string>
            </entry>
            <entry>
              <string>Variable</string>
              <string>ns1metadata_ns1servicetype</string>
            </entry>
            <entry>
              <string>RegularExpressions</string>
              <list/>
            </entry>
            <entry>
              <string>DefaultValue</string>
              <string></string>
            </entry>
            <entry>
              <string>isGlobal</string>
              <string>channel</string>
            </entry>
          </data>
        </com.webreach.mirth.model.Step>
        <com.webreach.mirth.model.Step>
          <sequenceNumber>4</sequenceNumber>
          <name>ns1request_ns1businessmessagepayload_ns1xmlschemadefinition</name>
          <script>var mapping;try { mapping = msg[&apos;request&apos;][&apos;businessMessagePayload&apos;][&apos;xmlSchemaDefinition&apos;].toString(); }catch (e) { logger.error(e);  mapping = &apos;&apos;;}channelMap.put(&apos;ns1request_ns1businessmessagepayload_ns1xmlschemadefinition&apos;, validate( mapping , &apos;&apos;, new Array()));</script>
          <type>Mapper</type>
          <data class="map">
            <entry>
              <string>Mapping</string>
              <string>msg[&apos;request&apos;][&apos;businessMessagePayload&apos;][&apos;xmlSchemaDefinition&apos;].toString()</string>
            </entry>
            <entry>
              <string>Variable</string>
              <string>ns1request_ns1businessmessagepayload_ns1xmlschemadefinition</string>
            </entry>
            <entry>
              <string>RegularExpressions</string>
              <list/>
            </entry>
            <entry>
              <string>DefaultValue</string>
              <string></string>
            </entry>
            <entry>
              <string>isGlobal</string>
              <string>channel</string>
            </entry>
          </data>
        </com.webreach.mirth.model.Step>
        <com.webreach.mirth.model.Step>
          <sequenceNumber>5</sequenceNumber>
          <name>ns1request_ns1businessmessagepayload</name>
          <script>var mapping;try { mapping = msg[&apos;request&apos;][&apos;businessMessagePayload&apos;].toString(); }catch (e) { logger.error(e);  mapping = &apos;&apos;;}channelMap.put(&apos;ns1request_ns1businessmessagepayload&apos;, validate( mapping , &apos;&apos;, new Array()));</script>
          <type>Mapper</type>
          <data class="map">
            <entry>
              <string>Mapping</string>
              <string>msg[&apos;request&apos;][&apos;businessMessagePayload&apos;].toString()</string>
            </entry>
            <entry>
              <string>Variable</string>
              <string>ns1request_ns1businessmessagepayload</string>
            </entry>
            <entry>
              <string>RegularExpressions</string>
              <list/>
            </entry>
            <entry>
              <string>DefaultValue</string>
              <string></string>
            </entry>
            <entry>
              <string>isGlobal</string>
              <string>channel</string>
            </entry>
          </data>
        </com.webreach.mirth.model.Step>
        <com.webreach.mirth.model.Step>
          <sequenceNumber>6</sequenceNumber>
          <name>ns1metadata_ns1externalidentifier</name>
          <script>var mapping;try { mapping = msg[&apos;metadata&apos;][&apos;externalIdentifier&apos;].toString(); }catch (e) { logger.error(e);  mapping = &apos;&apos;;}channelMap.put(&apos;ns1metadata_ns1externalidentifier&apos;, validate( mapping , &apos;&apos;, new Array()));</script>
          <type>Mapper</type>
          <data class="map">
            <entry>
              <string>Mapping</string>
              <string>msg[&apos;metadata&apos;][&apos;externalIdentifier&apos;].toString()</string>
            </entry>
            <entry>
              <string>Variable</string>
              <string>ns1metadata_ns1externalidentifier</string>
            </entry>
            <entry>
              <string>RegularExpressions</string>
              <list/>
            </entry>
            <entry>
              <string>DefaultValue</string>
              <string></string>
            </entry>
            <entry>
              <string>isGlobal</string>
              <string>channel</string>
            </entry>
          </data>
        </com.webreach.mirth.model.Step>
        <com.webreach.mirth.model.Step>
          <sequenceNumber>7</sequenceNumber>
          <name>Set Variables</name>
          <script>var ihubBusinessMessagePayloadDocument = Packages.gov.nih.nci.ihub.util.IntegrationHubUtil.
	stringToDOMDocument($(&apos;ns1request_ns1businessmessagepayload&apos;)).getDocumentElement();
channelMap.put(&apos;ihubBusinessMessagePayloadDocument&apos;, ihubBusinessMessagePayloadDocument);</script>
          <type>JavaScript</type>
          <data class="map">
            <entry>
              <string>Script</string>
              <string>var ihubBusinessMessagePayloadDocument = Packages.gov.nih.nci.ihub.util.IntegrationHubUtil.
	stringToDOMDocument($(&apos;ns1request_ns1businessmessagepayload&apos;)).getDocumentElement();
channelMap.put(&apos;ihubBusinessMessagePayloadDocument&apos;, ihubBusinessMessagePayloadDocument);</string>
            </entry>
          </data>
        </com.webreach.mirth.model.Step>
      </steps>
      <inboundTemplate>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#x0D;
&lt;ns1:caXchangeRequestMessage xmlns:ns1=&quot;http://caXchange.nci.nih.gov/messaging&quot;&gt;&#x0D;
 &lt;ns1:metadata&gt;&#x0D;
  &lt;ns1:transactionControl xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:nil=&quot;true&quot;/&gt;&#x0D;
  &lt;ns1:serviceType&gt;REGISTER_SUBJECT&lt;/ns1:serviceType&gt;&#x0D;
  &lt;ns1:externalIdentifier&gt;myExternalIdentifier&lt;/ns1:externalIdentifier&gt;&#x0D;
  &lt;ns1:caXchangeIdentifier&gt;d9491370-ac8f-11df-bdb2-e8f0d13a300b&lt;/ns1:caXchangeIdentifier&gt;&#x0D;
  &lt;ns1:credentials&gt;&#x0D;
   &lt;ns1:userName&gt;cctsdev1&lt;/ns1:userName&gt;&#x0D;
   &lt;ns1:gridIdentifier&gt;/O=caBIG/OU=caGrid/OU=Stage LOA1/OU=Dorian/CN=cctsdev1&lt;/ns1:gridIdentifier&gt;&#x0D;
   &lt;ns1:password&gt;An010101!!&lt;/ns1:password&gt;&#x0D;
   &lt;ns1:delegatedCredentialReference&gt;&amp;lt;ns1:DelegatedCredentialReference xmlns:ns1=&quot;http://cds.gaards.cagrid.org/CredentialDelegationService/DelegatedCredential/types&quot;&amp;gt;&#x0D;
 &amp;lt;ns2:EndpointReference xsi:type=&quot;ns2:EndpointReferenceType&quot; xmlns:ns2=&quot;http://schemas.xmlsoap.org/ws/2004/03/addressing&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt;&#x0D;
  &amp;lt;ns2:Address xsi:type=&quot;ns2:AttributedURI&quot;&amp;gt;https://cagrid-cds-stage.nci.nih.gov:8443/wsrf/services/cagrid/DelegatedCredential&amp;lt;/ns2:Address&amp;gt;&#x0D;
  &amp;lt;ns2:ReferenceProperties xsi:type=&quot;ns2:ReferencePropertiesType&quot;&amp;gt;&#x0D;
   &amp;lt;ns2:DelegatedCredentialKey xmlns:ns2=&quot;http://cds.gaards.cagrid.org/CredentialDelegationService/DelegatedCredential&quot;&amp;gt;&#x0D;
    &amp;lt;ns3:delegationId xmlns:ns3=&quot;http://gaards.cagrid.org/cds&quot;&amp;gt;7898&amp;lt;/ns3:delegationId&amp;gt;&#x0D;
   &amp;lt;/ns2:DelegatedCredentialKey&amp;gt;&#x0D;
  &amp;lt;/ns2:ReferenceProperties&amp;gt;&#x0D;
  &amp;lt;ns2:ReferenceParameters xsi:type=&quot;ns2:ReferenceParametersType&quot;/&amp;gt;&#x0D;
 &amp;lt;/ns2:EndpointReference&amp;gt;&#x0D;
&amp;lt;/ns1:DelegatedCredentialReference&amp;gt;&#x0D;
&lt;/ns1:delegatedCredentialReference&gt;&#x0D;
  &lt;/ns1:credentials&gt;&#x0D;
 &lt;/ns1:metadata&gt;&#x0D;
 &lt;ns1:request&gt;&#x0D;
  &lt;ns1:businessMessagePayload&gt;&#x0D;
   &lt;ns1:xmlSchemaDefinition&gt;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.domain&lt;/ns1:xmlSchemaDefinition&gt;&#x0D;
   &lt;registration xmlns=&quot;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.domain&quot; xmlns:c3pr=&quot;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.domain&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; gridId=&quot;d9a8e595-d0b1-4404-8eab-1bc2238cec35&quot;&gt;&#x0D;
				   &lt;studySite&gt;&#x0D;
					   &lt;healthcareSite&gt;&#x0D;
						   &lt;name&gt;National Cancer Institute&lt;/name&gt;&#x0D;
&#x0D;
						   &lt;address&gt;&#x0D;
							   &lt;streetAddress&gt;6116 Executive Boulevard&lt;/streetAddress&gt;&#x0D;
&#x0D;
							   &lt;city&gt;Bethesda&lt;/city&gt;&#x0D;
&#x0D;
							   &lt;stateCode&gt;MD&lt;/stateCode&gt;&#x0D;
&#x0D;
							   &lt;postalCode&gt;20892&lt;/postalCode&gt;&#x0D;
&#x0D;
							   &lt;countryCode&gt;USA&lt;/countryCode&gt;&#x0D;
&#x0D;
						&lt;/address&gt;&#x0D;
&#x0D;
						   &lt;nciInstituteCode&gt;NCI&lt;/nciInstituteCode&gt;&#x0D;
&#x0D;
					&lt;/healthcareSite&gt;&#x0D;
&#x0D;
				&lt;/studySite&gt;&#x0D;
&#x0D;
				   &lt;studyRef&gt;&#x0D;
					   &lt;identifier xsi:type=&quot;OrganizationAssignedIdentifierType&quot;&gt;&#x0D;
						   &lt;type&gt;Coordinating Center Identifier&lt;/type&gt;&#x0D;
&#x0D;
						   &lt;value&gt;SMOKE_TEST&lt;/value&gt;&#x0D;
&#x0D;
						   &lt;primaryIndicator&gt;true&lt;/primaryIndicator&gt;&#x0D;
&#x0D;
						   &lt;healthcareSite&gt;&#x0D;
							   &lt;name&gt;National Cancer Institute&lt;/name&gt;&#x0D;
&#x0D;
							   &lt;address&gt;&#x0D;
								   &lt;streetAddress&gt;6116 Executive Boulevard&lt;/streetAddress&gt;&#x0D;
&#x0D;
								   &lt;city&gt;Bethesda&lt;/city&gt;&#x0D;
&#x0D;
								   &lt;stateCode&gt;MD&lt;/stateCode&gt;&#x0D;
&#x0D;
								   &lt;postalCode&gt;20892&lt;/postalCode&gt;&#x0D;
&#x0D;
								   &lt;countryCode&gt;USA&lt;/countryCode&gt;&#x0D;
&#x0D;
							&lt;/address&gt;&#x0D;
&#x0D;
							   &lt;nciInstituteCode&gt;NCI&lt;/nciInstituteCode&gt;&#x0D;
&#x0D;
						&lt;/healthcareSite&gt;&#x0D;
&#x0D;
					&lt;/identifier&gt;&#x0D;
&#x0D;
				&lt;/studyRef&gt;&#x0D;
&#x0D;
				   &lt;participant gridId=&quot;87615e61-a900-47bc-8d62-3db4c9fa3659&quot;&gt;&#x0D;
					   &lt;firstName&gt;Saurabh&lt;/firstName&gt;&#x0D;
&#x0D;
					   &lt;lastName&gt;Ganguly&lt;/lastName&gt;&#x0D;
&#x0D;
					   &lt;address/&gt;&#x0D;
&#x0D;
					   &lt;administrativeGenderCode&gt;Male&lt;/administrativeGenderCode&gt;&#x0D;
&#x0D;
					   &lt;birthDate&gt;2001-01-01&lt;/birthDate&gt;&#x0D;
&#x0D;
					   &lt;ethnicGroupCode&gt;Non Hispanic or Latino&lt;/ethnicGroupCode&gt;&#x0D;
&#x0D;
					   &lt;raceCode&gt;Asian : White&lt;/raceCode&gt;&#x0D;
&#x0D;
					   &lt;identifier xsi:type=&quot;OrganizationAssignedIdentifierType&quot;&gt;&#x0D;
						   &lt;type&gt;MRN&lt;/type&gt;&#x0D;
&#x0D;
						   &lt;value&gt;6-5-43-43-2&lt;/value&gt;&#x0D;
&#x0D;
						   &lt;primaryIndicator&gt;true&lt;/primaryIndicator&gt;&#x0D;
&#x0D;
						   &lt;healthcareSite&gt;&#x0D;
							   &lt;name&gt;M D Anderson Cancer Center&lt;/name&gt;&#x0D;
&#x0D;
							   &lt;address&gt;&#x0D;
								   &lt;city&gt;Houston&lt;/city&gt;&#x0D;
&#x0D;
								   &lt;stateCode&gt;TX&lt;/stateCode&gt;&#x0D;
&#x0D;
								   &lt;countryCode&gt;USA&lt;/countryCode&gt;&#x0D;
&#x0D;
							&lt;/address&gt;&#x0D;
&#x0D;
							   &lt;nciInstituteCode&gt;MDA&lt;/nciInstituteCode&gt;&#x0D;
&#x0D;
						&lt;/healthcareSite&gt;&#x0D;
&#x0D;
					&lt;/identifier&gt;&#x0D;
&#x0D;
				&lt;/participant&gt;&#x0D;
&#x0D;
				   &lt;startDate&gt;2010-04-16&lt;/startDate&gt;&#x0D;
&#x0D;
				   &lt;informedConsentFormSignedDate&gt;2010-04-16&lt;/informedConsentFormSignedDate&gt;&#x0D;
&#x0D;
				   &lt;informedConsentVersion&gt;234asdf&lt;/informedConsentVersion&gt;&#x0D;
&#x0D;
				   &lt;identifier xsi:type=&quot;SystemAssignedIdentifierType&quot;&gt;&#x0D;
					   &lt;type&gt;Study Subject Identifier&lt;/type&gt;&#x0D;
&#x0D;
					   &lt;value&gt;c3882907-ac9e-4a00-8ab5-c2b219c005c8&lt;/value&gt;&#x0D;
&#x0D;
					   &lt;primaryIndicator&gt;false&lt;/primaryIndicator&gt;&#x0D;
&#x0D;
					   &lt;systemName&gt;C3PR&lt;/systemName&gt;&#x0D;
&#x0D;
				&lt;/identifier&gt;&#x0D;
&#x0D;
				   &lt;identifier xsi:type=&quot;OrganizationAssignedIdentifierType&quot;&gt;&#x0D;
					   &lt;type&gt;COORDINATING_CENTER_ASSIGNED_STUDY_SUBJECT_IDENTIFIER&lt;/type&gt;&#x0D;
&#x0D;
					   &lt;value&gt;8&lt;/value&gt;&#x0D;
&#x0D;
					   &lt;primaryIndicator&gt;false&lt;/primaryIndicator&gt;&#x0D;
&#x0D;
					   &lt;healthcareSite&gt;&#x0D;
						   &lt;name&gt;National Cancer Institute&lt;/name&gt;&#x0D;
&#x0D;
						   &lt;address&gt;&#x0D;
							   &lt;streetAddress&gt;6116 Executive Boulevard&lt;/streetAddress&gt;&#x0D;
&#x0D;
							   &lt;city&gt;Bethesda&lt;/city&gt;&#x0D;
&#x0D;
							   &lt;stateCode&gt;MD&lt;/stateCode&gt;&#x0D;
&#x0D;
							   &lt;postalCode&gt;20892&lt;/postalCode&gt;&#x0D;
&#x0D;
							   &lt;countryCode&gt;USA&lt;/countryCode&gt;&#x0D;
&#x0D;
						&lt;/address&gt;&#x0D;
&#x0D;
						   &lt;nciInstituteCode&gt;NCI&lt;/nciInstituteCode&gt;&#x0D;
&#x0D;
					&lt;/healthcareSite&gt;&#x0D;
&#x0D;
				&lt;/identifier&gt;&#x0D;
&#x0D;
				   &lt;scheduledEpoch gridId=&quot;866bb881-e2cb-444d-ad21-54d95e5f5d7e&quot; xsi:type=&quot;ScheduledTreatmentEpochType&quot;&gt;&#x0D;
					   &lt;startDate&gt;2010-04-16&lt;/startDate&gt;&#x0D;
&#x0D;
					   &lt;epoch gridId=&quot;866bb881-e2cb-444d-ad21-54d95e5f5d7e&quot; xsi:type=&quot;TreatmentEpochType&quot;&gt;&#x0D;
						   &lt;name&gt;Ep1&lt;/name&gt;&#x0D;
&#x0D;
						   &lt;descriptionText/&gt;&#x0D;
&#x0D;
						   &lt;arm gridId=&quot;0914c482-27c0-4ca5-b08a-48e98737d0f3&quot;&gt;&#x0D;
							   &lt;name&gt;Arm A&lt;/name&gt;&#x0D;
&#x0D;
							   &lt;descriptionText/&gt;&#x0D;
&#x0D;
							   &lt;targetAccrualNumber&gt;50&lt;/targetAccrualNumber&gt;&#x0D;
&#x0D;
						&lt;/arm&gt;&#x0D;
&#x0D;
					&lt;/epoch&gt;&#x0D;
&#x0D;
					   &lt;scheduledArm&gt;&#x0D;
						   &lt;arm gridId=&quot;0914c482-27c0-4ca5-b08a-48e98737d0f3&quot;&gt;&#x0D;
							   &lt;name&gt;Arm A&lt;/name&gt;&#x0D;
&#x0D;
							   &lt;descriptionText/&gt;&#x0D;
&#x0D;
							   &lt;targetAccrualNumber&gt;50&lt;/targetAccrualNumber&gt;&#x0D;
&#x0D;
						&lt;/arm&gt;&#x0D;
&#x0D;
					&lt;/scheduledArm&gt;&#x0D;
&#x0D;
					   &lt;eligibilityIndicator&gt;true&lt;/eligibilityIndicator&gt;&#x0D;
&#x0D;
				&lt;/scheduledEpoch&gt;&#x0D;
&#x0D;
			&lt;/registration&gt;&#x0D;
  &lt;/ns1:businessMessagePayload&gt;&#x0D;
 &lt;/ns1:request&gt;&#x0D;
&lt;/ns1:caXchangeRequestMessage&gt;&#x0D;
</inboundTemplate>
      <outboundTemplate></outboundTemplate>
      <inboundProtocol>XML</inboundProtocol>
      <outboundProtocol>XML</outboundProtocol>
      <inboundProperties>
        <property name="stripNamespaces">false</property>
      </inboundProperties>
      <outboundProperties>
        <property name="stripNamespaces">false</property>
      </outboundProperties>
    </transformer>
    <filter>
      <rules/>
    </filter>
    <transportName>Channel Reader</transportName>
    <mode>SOURCE</mode>
    <enabled>true</enabled>
  </sourceConnector>
  <destinationConnectors>
    <com.webreach.mirth.model.Connector>
      <name>caAERS</name>
      <properties>
        <property name="script">logger.debug(&quot;Invoking caAERS Broadcast Destination&quot;);
var targetGlobalInvocationStrategy = globalMap.get($(&apos;ns1metadata_ns1servicetype&apos;)+&quot;_Strategy&quot;);

var targetInvocationStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
targetInvocationStrategy.copyCommonContents(targetGlobalInvocationStrategy);

targetInvocationStrategy.setServiceUrl(globalMap.get(globalMap.get(&quot;target.detail.code.caaers&quot;)+&quot;.&quot;+$(&apos;ns1metadata_ns1servicetype&apos;)+&quot;.url&quot;));
targetInvocationStrategy.setServiceProviderName(globalMap.get(&quot;target.detail.code.caaers&quot;));
targetInvocationStrategy.setSubject(globalMap.get(&quot;subject&quot;+$(&apos;ns1metadata_ns1caxchangeidentifier&apos;)));
targetInvocationStrategy.setPayload($(&apos;ihubBusinessMessagePayloadDocument&apos;));

//Packages.java.lang.Thread.sleep(5000);

delegateSingleTargetRequest($(&apos;ns1metadata_ns1servicetype&apos;), targetInvocationStrategy, 
	$(&apos;ns1request_ns1businessmessagepayload_ns1xmlschemadefinition&apos;), $(&apos;ns1metadata_ns1caxchangeidentifier&apos;));	
</property>
        <property name="DataType">JavaScript Writer</property>
        <property name="host">sink</property>
      </properties>
      <transformer>
        <steps/>
        <inboundTemplate></inboundTemplate>
        <outboundTemplate></outboundTemplate>
        <inboundProtocol>XML</inboundProtocol>
        <outboundProtocol>XML</outboundProtocol>
        <inboundProperties>
          <property name="stripNamespaces">false</property>
        </inboundProperties>
        <outboundProperties>
          <property name="stripNamespaces">false</property>
        </outboundProperties>
      </transformer>
      <filter>
        <rules>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>0</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT)
{
return true;
}
return false;</script>
            <operator>NONE</operator>
          </com.webreach.mirth.model.Rule>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>1</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_STUDY_CREATION</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_STUDY_CREATION</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_STUDY_CREATION)
{
return true;
}
return false;</script>
            <operator>OR</operator>
          </com.webreach.mirth.model.Rule>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>2</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_LAB_BASED_AE</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_LAB_BASED_AE</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_LAB_BASED_AE)
{
return true;
}
return false;</script>
            <operator>OR</operator>
          </com.webreach.mirth.model.Rule>
        </rules>
      </filter>
      <transportName>JavaScript Writer</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
    </com.webreach.mirth.model.Connector>
    <com.webreach.mirth.model.Connector>
      <name>CTOM</name>
      <properties>
        <property name="script">logger.debug(&quot;Invoking CTOM Broadcast Destination&quot;);
var targetGlobalInvocationStrategy = globalMap.get($(&apos;ns1metadata_ns1servicetype&apos;)+&quot;_Strategy&quot;);

var targetInvocationStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
targetInvocationStrategy.copyCommonContents(targetGlobalInvocationStrategy);

targetInvocationStrategy.setServiceUrl(globalMap.get(Packages.gov.nih.nci.ihub.util.HubConstants.TARGET_DETAIL_CTOM+&quot;.&quot;+$(&apos;ns1metadata_ns1servicetype&apos;)+&quot;.url&quot;));
targetInvocationStrategy.setServiceProviderName(Packages.gov.nih.nci.ihub.util.HubConstants.TARGET_DETAIL_CTOM);
targetInvocationStrategy.setSubject(globalMap.get(&quot;subject&quot;+$(&apos;ns1metadata_ns1caxchangeidentifier&apos;)));
targetInvocationStrategy.setPayload($(&apos;ihubBusinessMessagePayloadDocument&apos;));


delegateSingleTargetRequest($(&apos;ns1metadata_ns1servicetype&apos;), targetInvocationStrategy, 
	$(&apos;ns1request_ns1businessmessagepayload_ns1xmlschemadefinition&apos;), $(&apos;ns1metadata_ns1caxchangeidentifier&apos;));	
</property>
        <property name="DataType">JavaScript Writer</property>
        <property name="host">sink</property>
      </properties>
      <transformer>
        <steps/>
        <inboundTemplate></inboundTemplate>
        <inboundProtocol>XML</inboundProtocol>
        <outboundProtocol>XML</outboundProtocol>
        <inboundProperties>
          <property name="stripNamespaces">false</property>
        </inboundProperties>
      </transformer>
      <filter>
        <rules>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>0</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT)
{
return true;
}
return false;</script>
            <operator>NONE</operator>
          </com.webreach.mirth.model.Rule>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>1</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_STUDY_CREATION</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_STUDY_CREATION</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_STUDY_CREATION)
{
return true;
}
return false;</script>
            <operator>OR</operator>
          </com.webreach.mirth.model.Rule>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>2</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_CT_LAB_DATA</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_CT_LAB_DATA</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_CT_LAB_DATA)
{
return true;
}
return false;</script>
            <operator>OR</operator>
          </com.webreach.mirth.model.Rule>
        </rules>
      </filter>
      <transportName>JavaScript Writer</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
    </com.webreach.mirth.model.Connector>
    <com.webreach.mirth.model.Connector>
      <name>PSC</name>
      <properties>
        <property name="script">/*
var targetInvocationStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.business.RegistrationInvocationStrategy(
	globalMap.get(&quot;subject&quot;+$(&apos;ns1metadata_ns1caxchangeidentifier&apos;)), 
	globalMap.get(globalMap.get(&quot;target.detail.code.psc&quot;)+&quot;.&quot;+$(&apos;ns1metadata_ns1servicetype&apos;)+&quot;.url&quot;), 
	$(&apos;ns1request_ns1businessmessagepayload&apos;), globalMap.get(&quot;target.detail.code.psc&quot;));
*/

logger.debug(&quot;Invoking PSC Broadcast Destination&quot;);
var targetGlobalInvocationStrategy = globalMap.get($(&apos;ns1metadata_ns1servicetype&apos;)+&quot;_Strategy&quot;);

var targetInvocationStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
targetInvocationStrategy.copyCommonContents(targetGlobalInvocationStrategy);

targetInvocationStrategy.setServiceUrl(globalMap.get(globalMap.get(&quot;target.detail.code.psc&quot;)+&quot;.&quot;+$(&apos;ns1metadata_ns1servicetype&apos;)+&quot;.url&quot;));
targetInvocationStrategy.setServiceProviderName(globalMap.get(&quot;target.detail.code.psc&quot;));
targetInvocationStrategy.setSubject(globalMap.get(&quot;subject&quot;+$(&apos;ns1metadata_ns1caxchangeidentifier&apos;)));
targetInvocationStrategy.setPayload($(&apos;ihubBusinessMessagePayloadDocument&apos;));


delegateSingleTargetRequest($(&apos;ns1metadata_ns1servicetype&apos;), targetInvocationStrategy, 
	$(&apos;ns1request_ns1businessmessagepayload_ns1xmlschemadefinition&apos;), $(&apos;ns1metadata_ns1caxchangeidentifier&apos;));	
</property>
        <property name="DataType">JavaScript Writer</property>
        <property name="host">sink</property>
      </properties>
      <transformer>
        <steps/>
        <inboundTemplate></inboundTemplate>
        <outboundTemplate></outboundTemplate>
        <inboundProtocol>XML</inboundProtocol>
        <outboundProtocol>XML</outboundProtocol>
        <inboundProperties>
          <property name="stripNamespaces">false</property>
        </inboundProperties>
        <outboundProperties/>
      </transformer>
      <filter>
        <rules>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>0</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_SCHEDULE_MODIFICATION</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_SCHEDULE_MODIFICATION</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_SCHEDULE_MODIFICATION)
{
return true;
}
return false;</script>
            <operator>NONE</operator>
          </com.webreach.mirth.model.Rule>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>1</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT)
{
return true;
}
return false;</script>
            <operator>OR</operator>
          </com.webreach.mirth.model.Rule>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>2</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_STUDY_CREATION</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_STUDY_CREATION</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_STUDY_CREATION)
{
return true;
}
return false;</script>
            <operator>OR</operator>
          </com.webreach.mirth.model.Rule>
        </rules>
      </filter>
      <transportName>JavaScript Writer</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
    </com.webreach.mirth.model.Connector>
    <com.webreach.mirth.model.Connector>
      <name>C3D</name>
      <properties>
        <property name="script">logger.debug(&quot;Invoking PSC Broadcast Destination&quot;);
var targetGlobalInvocationStrategy = globalMap.get($(&apos;ns1metadata_ns1servicetype&apos;)+&quot;_Strategy&quot;);

var targetInvocationStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
targetInvocationStrategy.copyCommonContents(targetGlobalInvocationStrategy);

targetInvocationStrategy.setServiceUrl(globalMap.get(Packages.gov.nih.nci.ihub.util.HubConstants.TARGET_DETAIL_C3D+&quot;.&quot;+$(&apos;ns1metadata_ns1servicetype&apos;)+&quot;.url&quot;));
targetInvocationStrategy.setServiceProviderName(Packages.gov.nih.nci.ihub.util.HubConstants.TARGET_DETAIL_C3D);
targetInvocationStrategy.setSubject(globalMap.get(&quot;subject&quot;+$(&apos;ns1metadata_ns1caxchangeidentifier&apos;)));

var payloadString = Packages.gov.nih.nci.ihub.util.IntegrationHubUtil.getPayloadFromBusinessPayload($(&apos;ns1request_ns1businessmessagepayload&apos;));
var ccTransformer = globalMap.get($(&apos;ns1metadata_ns1servicetype&apos;)+&quot;_Transformer&quot;);
ccTransformer = ccTransformer.getClass().newInstance();
var ccTransformedString = ccTransformer.convert2RequestString(payloadString);
var ccBusinessString = Packages.gov.nih.nci.ihub.util.IntegrationHubUtil.convertPayloadIntoBusinessPayload(ccTransformedString);

targetInvocationStrategy.setPayload(Packages.gov.nih.nci.ihub.util.IntegrationHubUtil.stringToDOMDocument(ccBusinessString).getDocumentElement());


delegateSingleTargetRequest($(&apos;ns1metadata_ns1servicetype&apos;), targetInvocationStrategy, 
	$(&apos;ns1request_ns1businessmessagepayload_ns1xmlschemadefinition&apos;), $(&apos;ns1metadata_ns1caxchangeidentifier&apos;));	
</property>
        <property name="DataType">JavaScript Writer</property>
        <property name="host">sink</property>
      </properties>
      <transformer>
        <steps/>
        <inboundTemplate></inboundTemplate>
        <outboundTemplate></outboundTemplate>
        <inboundProtocol>XML</inboundProtocol>
        <outboundProtocol>XML</outboundProtocol>
        <inboundProperties>
          <property name="stripNamespaces">false</property>
        </inboundProperties>
        <outboundProperties/>
      </transformer>
      <filter>
        <rules>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>0</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_REGISTER_SUBJECT)
{
return true;
}
return false;</script>
            <operator>NONE</operator>
          </com.webreach.mirth.model.Rule>
          <com.webreach.mirth.model.Rule>
            <sequenceNumber>1</sequenceNumber>
            <name>Accept message if &quot;$(&apos;ns1metadata_ns1servicetype&apos;)&quot; equals Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_LOAD_LAB_TO_CDMS</name>
            <data class="map">
              <entry>
                <string>OriginalField</string>
                <string></string>
              </entry>
              <entry>
                <string>Values</string>
                <list>
                  <string>Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_LOAD_LAB_TO_CDMS</string>
                </list>
              </entry>
              <entry>
                <string>Equals</string>
                <string>1</string>
              </entry>
              <entry>
                <string>Field</string>
                <string>$(&apos;ns1metadata_ns1servicetype&apos;)</string>
              </entry>
              <entry>
                <string>Name</string>
                <string></string>
              </entry>
              <entry>
                <string>Accept</string>
                <string>1</string>
              </entry>
            </data>
            <type>Rule Builder</type>
            <script>if($(&apos;ns1metadata_ns1servicetype&apos;) == Packages.gov.nih.nci.ihub.util.HubConstants.SERVICE_TYPE_LOAD_LAB_TO_CDMS)
{
return true;
}
return false;</script>
            <operator>OR</operator>
          </com.webreach.mirth.model.Rule>
        </rules>
      </filter>
      <transportName>JavaScript Writer</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
    </com.webreach.mirth.model.Connector>
    <com.webreach.mirth.model.Connector>
      <name>Response Aggregator</name>
      <properties>
        <property name="script">var targetInvocationStrategy = globalMap.get($(&apos;ns1metadata_ns1servicetype&apos;)+&quot;_Strategy&quot;);

aggregateBroadcastResponse(
	$(&apos;ns1metadata_ns1servicetype&apos;),
	targetInvocationStrategy,
	$(&apos;ihubBusinessMessagePayloadDocument&apos;),
	$(&apos;ns1metadata_ns1externalidentifier&apos;),
	$(&apos;ns1metadata_ns1caxchangeidentifier&apos;)
	);</property>
        <property name="DataType">JavaScript Writer</property>
        <property name="host">sink</property>
      </properties>
      <transformer>
        <steps/>
        <inboundProtocol>XML</inboundProtocol>
        <outboundProtocol>XML</outboundProtocol>
        <inboundProperties>
          <property name="stripNamespaces">false</property>
        </inboundProperties>
      </transformer>
      <filter>
        <rules/>
      </filter>
      <transportName>JavaScript Writer</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
    </com.webreach.mirth.model.Connector>
  </destinationConnectors>
  <properties>
    <property name="initialState">started</property>
    <property name="synchronous">false</property>
    <property name="store_messages">true</property>
    <property name="encryptData">false</property>
    <property name="transactional">false</property>
    <property name="max_message_age">-1</property>
    <property name="dont_store_filtered">false</property>
    <property name="error_messages_only">false</property>
  </properties>
  <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
  <postprocessingScript>// This script executes once after a message has been processed
return;</postprocessingScript>
  <deployScript>var registrationStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
registrationStrategy.setServiceType(&quot;REGISTER_SUBJECT&quot;);
registrationStrategy.setGridClientClassName(&quot;gov.nih.nci.ccts.grid.client.RegistrationConsumerClient&quot;);
registrationStrategy.setRequestPayloadClassName(&quot;gov.nih.nci.cabig.ccts.domain.Registration&quot;);
registrationStrategy.setReturnTypeNameSpace(&quot;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.domain&quot;);
registrationStrategy.setReturnTypeElement(&quot;registration&quot;);
registrationStrategy.setOperationName(&quot;register&quot;);
globalMap.put(&quot;REGISTER_SUBJECT_Strategy&quot;, registrationStrategy);
var subjectRegistrationTransformer = new Packages.gov.nih.nci.ihub.writer.ncies.capability.cdm.transformer.sr.SubjectRegistrationTransformer();
globalMap.put(&quot;REGISTER_SUBJECT_Transformer&quot;, subjectRegistrationTransformer);



var studyCreationStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
studyCreationStrategy.setServiceType(&quot;STUDY_CREATION&quot;);
studyCreationStrategy.setGridClientClassName(&quot;gov.nih.nci.ccts.grid.studyconsumer.client.StudyConsumerClient&quot;);
studyCreationStrategy.setRequestPayloadClassName(&quot;gov.nih.nci.cabig.ccts.domain.Study&quot;);
studyCreationStrategy.setReturnTypeNameSpace(&quot;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.domain&quot;);
studyCreationStrategy.setReturnTypeElement(&quot;study&quot;);	
studyCreationStrategy.setOperationName(&quot;createStudy&quot;);
globalMap.put(&quot;STUDY_CREATION_Strategy&quot;, studyCreationStrategy);


var adverseEventStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
adverseEventStrategy.setServiceType(&quot;SCHEDULE_MODIFICATION&quot;);
adverseEventStrategy.setGridClientClassName(&quot;gov.nih.nci.cabig.ctms.grid.ae.client.AdverseEventConsumerClient&quot;);
adverseEventStrategy.setRequestPayloadClassName(&quot;gov.nih.nci.cabig.ccts.ae.domain.AENotificationType&quot;);
adverseEventStrategy.setReturnTypeNameSpace(&quot;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.ae.domain&quot;);
adverseEventStrategy.setReturnTypeElement(&quot;&quot;);
adverseEventStrategy.setOperationName(&quot;register&quot;);
globalMap.put(&quot;SCHEDULE_MODIFICATION_Strategy&quot;, adverseEventStrategy);


var labBasedAEStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
labBasedAEStrategy.setServiceType(&quot;LAB_BASED_AE&quot;);
labBasedAEStrategy.setGridClientClassName(&quot;gov.nih.nci.ccts.grid.client.LabConsumerServiceClient&quot;);
labBasedAEStrategy.setRequestPayloadClassName(&quot;gov.nih.nci.cabig.ccts.domain.loadlabs.LoadLabsRequest&quot;);
labBasedAEStrategy.setReturnTypeNameSpace(&quot;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.domain.loadlabs&quot;);
labBasedAEStrategy.setReturnTypeElement(&quot;Acknowledgement&quot;);
labBasedAEStrategy.setOperationName(&quot;loadLabs&quot;);
globalMap.put(&quot;LAB_BASED_AE_Strategy&quot;, labBasedAEStrategy);


var loadLabToCDMSStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
loadLabToCDMSStrategy.setServiceType(&quot;LOAD_LAB_TO_CDMS&quot;);
loadLabToCDMSStrategy.setGridClientClassName(&quot;gov.nih.nci.clinicalconnector.client.ClinicalConnectorClient&quot;);
loadLabToCDMSStrategy.setRequestPayloadClassName(&quot;clinicalconnector.nci.nih.gov.LoadLabsRequest&quot;);
loadLabToCDMSStrategy.setReturnTypeNameSpace(&quot;gme://ccts.cabig/1.0/gov.nih.nci.cabig.ccts.domain.loadlabs&quot;);
loadLabToCDMSStrategy.setReturnTypeElement(&quot;LoadLabsResponse&quot;);
loadLabToCDMSStrategy.setOperationName(&quot;loadLabs&quot;);
globalMap.put(&quot;LOAD_LAB_TO_CDMS_Strategy&quot;, loadLabToCDMSStrategy);
var dataCaptureTransformer = new Packages.gov.nih.nci.ihub.writer.ncies.capability.cdm.transformer.dc.DataCaptureTransformer();
globalMap.put(&quot;LOAD_LAB_TO_CDMS_Transformer&quot;, dataCaptureTransformer);


var ctLabDataStrategy = new Packages.gov.nih.nci.ihub.writer.ncies.common.GenericInvocationStrategy();
ctLabDataStrategy.setServiceType(&quot;CT_LAB_DATA&quot;);
ctLabDataStrategy.setGridClientClassName(&quot;gov.nih.nci.cagrid.labviewer.client.LabLoaderClient&quot;);
ctLabDataStrategy.setRequestPayloadClassName(&quot;java.lang.String&quot;);
ctLabDataStrategy.setReturnTypeNameSpace(&quot;http://labviewer.cagrid.nci.nih.gov/LabLoader/types&quot;);
ctLabDataStrategy.setReturnTypeElement(&quot;LoadLabResponse&quot;);
ctLabDataStrategy.setOperationName(&quot;loadLab&quot;);
globalMap.put(&quot;CT_LAB_DATA_Strategy&quot;, ctLabDataStrategy);


return;</deployScript>
  <shutdownScript>// This script executes once when the mule engine is stopped
// You only have access to the globalMap here to persist data
return;</shutdownScript>
</com.webreach.mirth.model.Channel>